const {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
  } = require("@google/generative-ai");
  
  const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 64,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
  export const chatSession = model.startChat({
    generationConfig,
    // safetySettings: Adjust safety settings
    // See https://ai.google.dev/gemini-api/docs/safety-settings
    history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan from Vancouver, BC, Canada to Calgary, AB, Canada , from Aug 13, 2024 to Aug 16, 2024 for 2 travelers with a Cheap budget with a Flight Details, Flight Price with Flight Booking url, Hotels options list with HotelName, Hotel address, Price, Hotel image url, Hotel Booking Url, geo coordinates, rating, descriptions and Places to visit nearby with placeName, Place Details, Place Image Url, Geo Coordinates, Ticket Pricing, Time to travel each of location from Aug 13, 2024 to Aug 16, 2024 with each day plan with best time to visit in JSON format."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"trip\": {\n    \"destination\": \"Calgary, AB, Canada\",\n    \"origin\": \"Vancouver, BC, Canada\",\n    \"travelers\": 2,\n    \"budget\": \"cheap\",\n    \"dates\": {\n      \"start\": \"2024-08-13\",\n      \"end\": \"2024-08-16\"\n    }\n  },\n  \"flights\": {\n    \"details\": {\n      \"airline\": \"Swoop\",\n      \"departure_airport\": \"Vancouver International Airport (YVR)\",\n      \"arrival_airport\": \"Calgary International Airport (YYC)\",\n      \"departure_time\": \"10:00 AM\",\n      \"arrival_time\": \"11:30 AM\"\n    },\n    \"price\": \"$150\",\n    \"booking_url\": \"https://www.flyswoop.com/\"\n  },\n  \"hotels\": [\n    {\n      \"name\": \"The Hotel Arts\",\n      \"address\": \"119 12th Ave SW, Calgary, AB T2R 0S2, Canada\",\n      \"price\": \"$100/night\",\n      \"image_url\": \"https://www.thehotelarts.com/images/hotel-arts-exterior.jpg\",\n      \"booking_url\": \"https://www.thehotelarts.com/\",\n      \"geo_coordinates\": [51.0454, -114.0647],\n      \"rating\": 4.5,\n      \"description\": \"Modern hotel with stylish rooms and a rooftop pool, near the Calgary Tower.\"\n    },\n    {\n      \"name\": \"The Fairmont Palliser\",\n      \"address\": \"133 9th Ave SW, Calgary, AB T2P 1L5, Canada\",\n      \"price\": \"$120/night\",\n      \"image_url\": \"https://www.fairmont.com/palliser/media/images/hero-header.jpg\",\n      \"booking_url\": \"https://www.fairmont.com/palliser/\",\n      \"geo_coordinates\": [51.0486, -114.0652],\n      \"rating\": 4.0,\n      \"description\": \"Elegant hotel in the heart of Calgary with a historic charm.\"\n    }\n  ],\n  \"itinerary\": [\n    {\n      \"day\": \"2024-08-13\",\n      \"activities\": [\n        {\n          \"time\": \"12:00 PM\",\n          \"name\": \"Arrival at Calgary International Airport (YYC)\",\n          \"details\": \"Pick up luggage and head to your hotel.\",\n          \"place_image_url\": \"https://www.yyc.com/media/1232/yyc-airport-terminal-1-exterior-photo.jpg\",\n          \"geo_coordinates\": [51.1176, -114.0155],\n          \"travel_time\": \"30 minutes\"\n        },\n        {\n          \"time\": \"1:00 PM\",\n          \"name\": \"Check-in at The Hotel Arts\",\n          \"details\": \"Relax and unwind after your flight.\",\n          \"place_image_url\": \"https://www.thehotelarts.com/images/hotel-arts-exterior.jpg\",\n          \"geo_coordinates\": [51.0454, -114.0647],\n          \"travel_time\": \"10 minutes\"\n        },\n        {\n          \"time\": \"2:00 PM\",\n          \"name\": \"Lunch at Charbar\",\n          \"details\": \"Enjoy a delicious meal with a great view.\",\n          \"place_image_url\": \"https://www.charbar.ca/wp-content/uploads/2023/01/Charbar-Interior.jpg\",\n          \"geo_coordinates\": [51.0471, -114.0631],\n          \"travel_time\": \"5 minutes\"\n        },\n        {\n          \"time\": \"4:00 PM\",\n          \"name\": \"Explore Stephen Avenue Walk\",\n          \"details\": \"Browse the shops and restaurants in this vibrant pedestrian mall.\",\n          \"place_image_url\": \"https://www.calgary.ca/media/Images/stephen-avenue-walk-c.jpg\",\n          \"geo_coordinates\": [51.0475, -114.0623],\n          \"travel_time\": \"5 minutes\"\n        },\n        {\n          \"time\": \"6:00 PM\",\n          \"name\": \"Dinner at Rooftop Bar @ Simmons\",\n          \"details\": \"Enjoy stunning city views while savoring cocktails and dinner.\",\n          \"place_image_url\": \"https://www.simmonsrestaurants.com/wp-content/uploads/2019/04/simmons-rooftop-bar.jpg\",\n          \"geo_coordinates\": [51.0457, -114.0660],\n          \"travel_time\": \"10 minutes\"\n        }\n      ]\n    },\n    {\n      \"day\": \"2024-08-14\",\n      \"activities\": [\n        {\n          \"time\": \"9:00 AM\",\n          \"name\": \"Visit Calgary Zoo\",\n          \"details\": \"Explore diverse wildlife and exhibits.\",\n          \"place_image_url\": \"https://www.calgaryzoo.com/sites/default/files/styles/home_hero_desktop/public/images/hero-images/hero-zoo-skyline-2018.jpg?itok=G4iZ7X9T\",\n          \"geo_coordinates\": [51.0660, -114.0763],\n          \"travel_time\": \"20 minutes\"\n        },\n        {\n          \"time\": \"1:00 PM\",\n          \"name\": \"Lunch at The Zoo's Cafe\",\n          \"details\": \"Grab a bite to eat at the zoo's restaurant.\",\n          \"place_image_url\": \"https://www.calgaryzoo.com/sites/default/files/styles/gallery_thumb_desktop/public/images/gallery/zoo-cafe-exterior.jpg?itok=uZ7W9Y-y\",\n          \"geo_coordinates\": [51.0660, -114.0763],\n          \"travel_time\": \"5 minutes\"\n        },\n        {\n          \"time\": \"3:00 PM\",\n          \"name\": \"Explore Calgary Tower\",\n          \"details\": \"Enjoy panoramic city views from the observation deck.\",\n          \"place_image_url\": \"https://www.calgarytower.com/media/images/calgary-tower-skyline-view.jpg\",\n          \"geo_coordinates\": [51.0474, -114.0636],\n          \"travel_time\": \"20 minutes\"\n        },\n        {\n          \"time\": \"6:00 PM\",\n          \"name\": \"Dinner at The Keg Steakhouse + Bar\",\n          \"details\": \"Indulge in a delicious steak dinner.\",\n          \"place_image_url\": \"https://www.kegsteakhouse.com/images/location-images/25847-the-keg-steakhouse-bar-calgary-downtown.jpg\",\n          \"geo_coordinates\": [51.0470, -114.0631],\n          \"travel_time\": \"10 minutes\"\n        }\n      ]\n    },\n    {\n      \"day\": \"2024-08-15\",\n      \"activities\": [\n        {\n          \"time\": \"9:00 AM\",\n          \"name\": \"Visit Heritage Park Historical Village\",\n          \"details\": \"Step back in time and explore historic buildings and exhibits.\",\n          \"place_image_url\": \"https://www.heritagepark.ca/sites/default/files/styles/full/public/images/carousel-images/hp-historical-village-01.jpg?itok=c0kQv64D\",\n          \"geo_coordinates\": [51.0171, -114.0504],\n          \"travel_time\": \"30 minutes\"\n        },\n        {\n          \"time\": \"1:00 PM\",\n          \"name\": \"Lunch at The Trading Post\",\n          \"details\": \"Enjoy a meal at the park's restaurant.\",\n          \"place_image_url\": \"https://www.heritagepark.ca/sites/default/files/styles/carousel_thumb/public/images/carousel-images/hp-trading-post-01.jpg?itok=Y7oZ_iW1\",\n          \"geo_coordinates\": [51.0171, -114.0504],\n          \"travel_time\": \"5 minutes\"\n        },\n        {\n          \"time\": \"3:00 PM\",\n          \"name\": \"Explore Calgary's River Walk\",\n          \"details\": \"Enjoy a scenic walk along the Bow River.\",\n          \"place_image_url\": \"https://www.calgary.ca/media/Images/bow-river.jpg\",\n          \"geo_coordinates\": [51.0474, -114.0636],\n          \"travel_time\": \"20 minutes\"\n        },\n        {\n          \"time\": \"6:00 PM\",\n          \"name\": \"Dinner at The Coup\",\n          \"details\": \"Enjoy a delicious and casual meal with a French twist.\",\n          \"place_image_url\": \"https://www.thecoup.ca/wp-content/uploads/2019/12/Coup-Interior-2.jpg\",\n          \"geo_coordinates\": [51.0461, -114.0630],\n          \"travel_time\": \"10 minutes\"\n        }\n      ]\n    },\n    {\n      \"day\": \"2024-08-16\",\n      \"activities\": [\n        {\n          \"time\": \"9:00 AM\",\n          \"name\": \"Visit The Glenbow Museum\",\n          \"details\": \"Explore the history and culture of Alberta.\",\n          \"place_image_url\": \"https://www.glenbow.org/sites/default/files/styles/home_hero_desktop/public/2021-10/Glenbow_Hero_Banner_2021_Web.jpg?itok=19zQ8n8G\",\n          \"geo_coordinates\": [51.0479, -114.0658],\n          \"travel_time\": \"10 minutes\"\n        },\n        {\n          \"time\": \"12:00 PM\",\n          \"name\": \"Lunch at Charbar\",\n          \"details\": \"Enjoy a final delicious meal.\",\n          \"place_image_url\": \"https://www.charbar.ca/wp-content/uploads/2023/01/Charbar-Interior.jpg\",\n          \"geo_coordinates\": [51.0471, -114.0631],\n          \"travel_time\": \"5 minutes\"\n        },\n        {\n          \"time\": \"2:00 PM\",\n          \"name\": \"Check-out of hotel\",\n          \"details\": \"Pack your bags and head to the airport.\",\n          \"place_image_url\": \"https://www.thehotelarts.com/images/hotel-arts-exterior.jpg\",\n          \"geo_coordinates\": [51.0454, -114.0647],\n          \"travel_time\": \"10 minutes\"\n        },\n        {\n          \"time\": \"3:00 PM\",\n          \"name\": \"Departure from Calgary International Airport (YYC)\",\n          \"details\": \"Enjoy your flight back home.\",\n          \"place_image_url\": \"https://www.yyc.com/media/1232/yyc-airport-terminal-1-exterior-photo.jpg\",\n          \"geo_coordinates\": [51.1176, -114.0155],\n          \"travel_time\": \"30 minutes\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Notes:**\n\n* This itinerary is a suggestion and can be customized to your preferences.\n* The hotel prices are approximate and may vary depending on the season and availability.\n* You can book flights and hotels directly through the provided links.\n* The travel times are estimates and may vary depending on traffic and other factors.\n* You can find more information about the places to visit on their websites.\n* Make sure to check the opening hours and ticket prices for the attractions you plan to visit.\n* Have a great trip! \n"},
          ],
        },
      ],
  });
  
  // const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
  // console.log(result.response.text());
  